<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scope Example: Shopping Cart</title>
</head>
<body>
    <h1>Shopping Cart</h1>

    <h2>Items in Cart</h2>
    <ul id="cartItems"></ul>

    <h3>Add Item to Cart</h3>
    <input type="text" id="itemName" placeholder="Item Name">
    <input type="number" id="itemPrice" placeholder="Item Price">
    <button id="addItem">Add Item</button>

    <h3>Total:</h3>
    <p id="totalWithTax">Total with Tax: $0.00</p>

    <script>
        // Global Scope
        const taxRate = 0.08; // Global tax rate
        let shoppingCart = []; // Global shopping cart array

        // Function to add an item to the shopping cart
        function addItemToCart(name, price) {
            // Function Scope
            const item = { name, price }; // Encapsulation of item data
            shoppingCart.push(item); // Add item to global shoppingCart
            displayCart(); // Update the UI
            calculateTotal(); // Calculate and display the total
        }

        // Function to display cart items in the UI
        function displayCart() {
            const cartItemsList = document.getElementById('cartItems');
            cartItemsList.innerHTML = ''; // Clear previous list

            shoppingCart.forEach((item, index) => {
                // Block Scope
                const listItem = document.createElement('li');
                listItem.textContent = `${index + 1}. ${item.name} - $${item.price.toFixed(2)}`;
                cartItemsList.appendChild(listItem);
            });
        }

        // Function to calculate total cost including tax
        function calculateTotal() {
            let total = 0; // Function Scope

            for (let i = 0; i < shoppingCart.length; i++) {
                // Block Scope
                const itemPrice = shoppingCart[i].price;
                total += itemPrice; // Accumulate total price
            }

            const totalWithTax = total + total * taxRate; // Calculate total with tax
            document.getElementById('totalWithTax').textContent = `Total with Tax: $${totalWithTax.toFixed(2)}`;
        }

        // Event listener to handle adding items to the cart
        document.getElementById('addItem').addEventListener('click', () => {
            const itemName = document.getElementById('itemName').value.trim();
            const itemPrice = parseFloat(document.getElementById('itemPrice').value);

            if (itemName && !isNaN(itemPrice) && itemPrice > 0) {
                addItemToCart(itemName, itemPrice); // Add item using function
                document.getElementById('itemName').value = ''; // Clear input fields
                document.getElementById('itemPrice').value = '';
            } else {
                alert('Please enter a valid item name and price.');
            }
        });
    </script>
</body>
</html>
